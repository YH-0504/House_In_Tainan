<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>台南看好房｜客戶需求問卷</title>
  <style>
    /* 全域樣式 */
    body {
      background-color: #d9cfc7; /* 淡版背景 */
      font-family: "Helvetica", sans-serif;
      color: #333;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .container {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      width: 90%;
      max-width: 600px;
      padding: 1rem 2rem;
      position: relative;
    }
    header {
      text-align: center;
      margin-bottom: 1rem;
    }
    header img {
      width: 100px;
      height: auto;
      display: block;
      margin: 0 auto 0.5rem;
    }
    header h1 {
      margin: 0;
      font-size: 1.8rem;
      color: #3e3e3e;
      font-weight: bold;
    }
    .step {
      display: none; /* 初始隱藏所有頁 */
    }
    .step.active {
      display: block;
    }
    .progress-bar {
      height: 8px;
      background-color: #e0e0e0;
      border-radius: 4px;
      overflow: hidden;
      margin-bottom: 1rem;
    }
    .progress-bar-fill {
      height: 100%;
      background-color: #4caf50;
      width: 0%;
      transition: width 0.3s;
    }
    label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
    }
    .options {
      margin-top: 0.5rem;
    }
    .options label {
      display: block;
      margin-bottom: 0.3rem;
    }
    input[type="text"], input[type="number"], input[type="tel"], textarea {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    .buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 1.5rem;
    }
    button {
      padding: 0.75rem 1.2rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
    }
    .btn-prev { background: #ccc; }
    .btn-next { background: #4caf50; color: #fff; }
    footer {
      text-align: center;
      padding-top: 1.5rem;
      border-top: 1px solid #eee;
      margin-top: 1rem;
      font-size: 0.9rem;
      color: #555;
    }
    footer a { color: #4caf50; text-decoration: none; }
  </style>
</head>
<body>
  <div class="container">
    <!-- 表頭Logo與標題 -->
    <header>
      <img src="台南看好房LOGO.png" alt="台南看好房 LOGO" style="width: 100px; border-radius: 10px;">
      <h1>台南看好房</h1>
    </header>

    <!-- 進度條 -->
    <div class="progress-bar">
      <div id="progressFill" class="progress-bar-fill"></div>
    </div>

    <form id="multiStepForm" action="https://formsubmit.co/s3737123456789@gmail.com" method="POST">
      <!-- 第1頁 -->
      <div class="step active">
        <label>1. 看房看多久了呢？</label>
        <div class="options">
          <label><input type="radio" name="watchTime" value="最近才剛開始看"> 最近才剛開始看</label>
          <label><input type="radio" name="watchTime" value="已經看了一陣子了"> 已經看了一陣子了</label>
        </div>
      </div>

      <!-- 第2頁 -->
      <div class="step">
        <label>2. 偏好區域 (最多選三個)</label>
        <div class="options" id="areaOptions"></div>
        <input type="text" name="otherArea" placeholder="是否還有其他特定區域呢？">
      </div>

      <!-- 第3頁 (3 & 4 同頁) -->
      <div class="step">
        <label>3. 物件的種類 (最多兩個)</label>
        <div class="options" id="typeOptions"></div>
        <label>4. 物件的類型 (最多兩個)</label>
        <div class="options" id="kindOptions"></div>
      </div>

      <!-- 第4頁 -->
      <div class="step">
        <label>5. 自備款 (現金) 大約：(萬)</label>
        <input type="number" name="budgetCash">
        <small>許多人不知道能負擔多少，這部分可讓小張更明確幫您規劃目標，提供給您最適合您的房源。</small>
      </div>

      <!-- 第5頁 -->
      <div class="step">
        <label>6. 若是大樓的話需要幾房呢？</label>
        <div class="options">
          <label><input type="checkbox" name="roomNeed" value="我選透天"> 我選透天</label>
          <label><input type="checkbox" name="roomNeed" value="1房"> 1房</label>
          <label><input type="checkbox" name="roomNeed" value="2房"> 2房</label>
          <label><input type="checkbox" name="roomNeed" value="3房以上"> 3房以上</label>
        </div>
      </div>

      <!-- 第6頁 -->
      <div class="step">
        <label>7. 希望的屋齡：</label>
        <div class="options">
          <label><input type="radio" name="houseAge" value="6年內"> 6年內</label>
          <label><input type="radio" name="houseAge" value="10年內"> 10年內</label>
          <label><input type="radio" name="houseAge" value="15年內"> 15年內</label>
          <label><input type="radio" name="houseAge" value="20年內"> 20年內</label>
          <label><input type="radio" name="houseAge" value="21-35年內"> 21-35年內都可以</label>
          <label><input type="radio" name="houseAge" value="不在意"> 不在意屋齡，只要地點好</label>
        </div>
      </div>

      <!-- 第7頁 (8 & 9 同頁) -->
      <div class="step">
        <label>8. 是否曾經看過哪些房子有喜歡的呢？</label>
        <textarea name="likedProperties" rows="3"></textarea>
        <label>9. 有無比較注重的細節呢？</label>
        <textarea name="importantDetails" rows="3"></textarea>
      </div>

      <!-- 第8頁 -->
      <div class="step">
        <label style="font-size:1.2rem;">10. 請留下您的聯絡資料</label>
        <p>小張會根據需求篩選最符合的物件給您</p>
        <input type="text" name="name" placeholder="怎麼稱呼您：" required>
        <input type="tel" name="phone" placeholder="手機電話：" required>
        <input type="text" name="lineID" placeholder="LINE ID：" required>
        <small style="display: block; margin: 1rem 0; font-size: 0.85rem; color: #555;">
  個人資料保護協議：您所填入的資料僅授權 <strong>台南看好房 - 張英泓</strong> 本人查閱，僅用於聯絡與服務使用，不會有個資外洩之疑慮，請安心填寫。</small>
      </div>

      <!-- 導航按鈕 -->
      <div class="buttons">
        <button type="button" class="btn-prev" id="prevBtn">上一步</button>
        <button type="button" class="btn-next" id="nextBtn">下一步</button>
      </div>
      <input type="hidden" name="_captcha" value="false">
      <input type="hidden" name="_next" value="https://yh-0504.github.io/House_In_Tainan/thankyou.html">
    </form>

    <!-- 表尾資訊 -->
    <footer>
      <p><strong>台南看好方 - 張英泓 (小張)</strong></p>
      <p>電話：<a href="tel:0962062425">0962062425</a></p>
      <p>LINE：<a href="https://line.me/ti/p/TfLABJ5yMg" target="_blank">加入小張LINE</a></p>
      <p>永續房屋仲介企業社</p>
    </footer>
  </div>

  <script>
    // 選項資料
    const areaOpts = ["東區","北區","南區","中西區","永康區","仁德區","安南區","安平區","新營區","歸仁區","新市區","新化區","善化區","關廟區","安定區"];
    const typeOpts = ["透天","大樓","公寓(無電梯)","店面","土地","農地"];
    const kindOpts = ["住宅","套房","雅房","店面","辦公","廠房","農地","工業地","住宅地","商業地"];

    // 產生多選
    function genChoices(id, opts, max) {
  const container = document.getElementById(id);
  let nameAttr = '';

  // 設定每一組選項的 name
  if (id === 'areaOptions') nameAttr = 'preferredAreas[]';
  else if (id === 'typeOptions') nameAttr = 'propertyTypes[]';
  else if (id === 'kindOptions') nameAttr = 'propertyKinds[]';

  opts.forEach(opt => {
    const lbl = document.createElement('label');
    const cb = document.createElement('input');
    cb.type = 'checkbox';
    cb.value = opt;
    cb.name = nameAttr; // ✅ 有 name 才會被送出
    cb.addEventListener('change', () => limitSel(id, max));
    lbl.append(cb, ' ' + opt);
    container.append(lbl);
  });
}

    function limitSel(id, max) {
      const cont = document.getElementById(id);
      const cbs = cont.querySelectorAll('input[type=checkbox]');
      const sel = Array.from(cbs).filter(c=>c.checked);
      cbs.forEach(c=> c.disabled = !c.checked && sel.length>=max);
    }
    genChoices('areaOptions', areaOpts, 3);
    genChoices('typeOptions', typeOpts, 2);
    genChoices('kindOptions', kindOpts, 2);

    // 分頁邏輯
    let current = 0;
    const steps = document.querySelectorAll('.step');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const progress = document.getElementById('progressFill');

    function showStep(n) {
      steps.forEach((s,i)=> s.classList.toggle('active', i===n));
      prevBtn.style.display = n===0 ? 'none':'inline-block';
      nextBtn.textContent = n===steps.length-1 ? '送出' : '下一步';
      const pct = Math.round((n)/(steps.length-1)*100);
      progress.style.width = pct + '%';
    }
    showStep(current);

    prevBtn.addEventListener('click', ()=>{
      if(current>0) current--;
      showStep(current);
    });
    nextBtn.addEventListener('click', ()=>{
      if(current < steps.length-1) {
        current++;
        showStep(current);
      } else {
        document.getElementById('multiStepForm').submit();
      }
    });

  </script>
</body>
</html>
